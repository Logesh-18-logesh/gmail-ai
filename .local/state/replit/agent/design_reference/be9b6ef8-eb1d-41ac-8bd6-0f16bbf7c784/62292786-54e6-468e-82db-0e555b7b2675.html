<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Email Manager - Intelligent Productivity Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'google-blue': '#1a73e8',
                        'google-green': '#34a853',
                        'google-yellow': '#fbbc04',
                        'google-red': '#ea4335',
                        'urgent': '#ea4335',
                        'normal': '#34a853',
                        'low': '#9aa0a6'
                    },
                    fontFamily: {
                        'google': ['Google Sans', 'Roboto', 'Arial', 'sans-serif']
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 font-google">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-brain text-google-blue text-2xl"></i>
                    <h1 class="text-xl font-semibold text-gray-900">AI Email Manager</h1>
                </div>
                <div class="hidden md:flex items-center space-x-2 bg-gray-100 rounded-lg px-3 py-2">
                    <i class="fas fa-search text-gray-500"></i>
                    <input type="text" placeholder="Search emails..." class="bg-transparent outline-none text-sm w-64">
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button class="flex items-center space-x-2 bg-google-blue text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    <i class="fas fa-sync-alt"></i>
                    <span class="hidden md:inline">Sync Emails</span>
                </button>
                <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="w-8 h-8 bg-google-blue rounded-full flex items-center justify-center text-white text-sm font-medium">
                    <i class="fas fa-user"></i>
                </div>
            </div>
        </div>
    </header>

    <div class="flex h-screen overflow-hidden">
        <!-- @COMPONENT: Sidebar Navigation -->
        <div class="w-64 bg-white border-r border-gray-200 flex flex-col">
            <!-- Credentials Upload Section -->
            <div class="p-4 border-b border-gray-200">
                <div id="credentialsUpload" class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-google-blue transition-colors cursor-pointer">
                    <i class="fas fa-cloud-upload-alt text-2xl text-gray-400 mb-2"></i>
                    <p class="text-sm text-gray-600">Upload credentials.json</p>
                    <input type="file" accept=".json" class="hidden" id="credentialsFile">
                </div>
                <div id="credentialsStatus" class="hidden mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700">
                    <i class="fas fa-check-circle mr-1"></i>
                    Credentials loaded successfully
                </div>
            </div>

            <!-- Priority Inbox Navigation -->
            <div class="flex-1 overflow-y-auto">
                <div class="p-4">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Priority Inbox</h3>
                    <nav class="space-y-1">
                        <button class="w-full flex items-center justify-between px-3 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg bg-blue-50 text-google-blue border-r-2 border-google-blue">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-exclamation-triangle text-google-red"></i>
                                <span>Urgent</span>
                            </div>
                            <span class="bg-google-red text-white text-xs rounded-full px-2 py-1" data-bind="urgentCount">3</span>
                        </button>
                        <button class="w-full flex items-center justify-between px-3 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-reply text-google-blue"></i>
                                <span>To Respond</span>
                            </div>
                            <span class="bg-gray-500 text-white text-xs rounded-full px-2 py-1" data-bind="respondCount">7</span>
                        </button>
                        <button class="w-full flex items-center justify-between px-3 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-calendar text-google-green"></i>
                                <span>Meeting</span>
                            </div>
                            <span class="bg-gray-500 text-white text-xs rounded-full px-2 py-1" data-bind="meetingCount">2</span>
                        </button>
                        <button class="w-full flex items-center justify-between px-3 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span>FYI</span>
                            </div>
                            <span class="bg-gray-500 text-white text-xs rounded-full px-2 py-1" data-bind="fyiCount">12</span>
                        </button>
                    </nav>
                </div>

                <div class="p-4 border-t border-gray-200">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">Follow-ups</h3>
                    <nav class="space-y-1">
                        <button class="w-full flex items-center justify-between px-3 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-clock text-orange-500"></i>
                                <span>Overdue</span>
                            </div>
                            <span class="bg-orange-500 text-white text-xs rounded-full px-2 py-1" data-bind="overdueCount">4</span>
                        </button>
                        <button class="w-full flex items-center justify-between px-3 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-bell text-purple-500"></i>
                                <span>Reminders</span>
                            </div>
                            <span class="bg-purple-500 text-white text-xs rounded-full px-2 py-1" data-bind="reminderCount">6</span>
                        </button>
                    </nav>
                </div>

                <div class="p-4 border-t border-gray-200">
                    <button class="w-full flex items-center space-x-3 px-3 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                        <i class="fas fa-calendar-alt text-google-blue"></i>
                        <span>Calendar View</span>
                    </button>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: Sidebar Navigation -->

        <!-- Main Content Area -->
        <div class="flex-1 flex overflow-hidden">
            <!-- @COMPONENT: Email List -->
            <div class="w-1/2 bg-white border-r border-gray-200 flex flex-col">
                <!-- Email List Header -->
                <div class="p-4 border-b border-gray-200">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold text-gray-900">Urgent (3)</h2>
                        <div class="flex items-center space-x-2">
                            <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-filter"></i>
                            </button>
                            <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-sort"></i>
                            </button>
                            <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-archive"></i>
                            </button>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2 text-sm text-gray-600">
                        <i class="fas fa-robot text-google-blue"></i>
                        <span>AI-sorted by priority and confidence score</span>
                    </div>
                </div>

                <!-- Email List Items -->
                <div class="flex-1 overflow-y-auto">
                    <!-- @MAP: emailResults.filter(email => email.score > threshold).map(email => ( -->
                    
                    <!-- Highest Priority Email - Yellow Background -->
                    <div class="border-l-4 border-google-yellow bg-yellow-50 hover:bg-yellow-100 cursor-pointer transition-colors email-item" data-priority="urgent" data-score="0.95">
                        <div class="p-4 border-b border-yellow-200">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center space-x-3">
                                    <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=40&h=40" alt="Sarah Chen profile" class="w-8 h-8 rounded-full">
                                    <div>
                                        <p class="text-sm font-semibold text-gray-900" data-bind="email.sender">Sarah Chen</p>
                                        <p class="text-xs text-gray-600">VP <i class="fas fa-certificate text-blue-500 ml-1"></i></p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <span class="bg-google-red text-white text-xs px-2 py-1 rounded-full font-medium">Urgent</span>
                                        <span class="text-xs text-gray-500" data-bind="email.timestamp">2 hours ago</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <span class="text-xs text-gray-600">Confidence:</span>
                                        <span class="text-xs font-medium text-green-600" data-bind="email.score">95%</span>
                                    </div>
                                </div>
                            </div>
                            <h3 class="text-sm font-semibold text-gray-900 mb-1" data-bind="email.subject">Q4 Budget Review - Need Response Today</h3>
                            <p class="text-xs text-gray-600 mb-2" data-bind="email.summary">AI Summary: Budget approval needed for Q4 marketing spend. Deadline: Today 5PM. Requires your sign-off on budget allocation.</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4 text-xs text-gray-600">
                                    <span><i class="fas fa-clock mr-1"></i>Deadline: Today 5:00 PM</span>
                                    <span><i class="fas fa-comments mr-1"></i>Thread (4 messages)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="text-xs bg-white border border-gray-300 px-2 py-1 rounded hover:bg-gray-50" data-event="click:correctPrediction">
                                        <i class="fas fa-edit mr-1"></i>Correct AI
                                    </button>
                                    <button class="text-xs bg-google-blue text-white px-2 py-1 rounded hover:bg-blue-600">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Second Priority Email - Light Green Background -->
                    <div class="border-l-4 border-google-green bg-green-50 hover:bg-green-100 cursor-pointer transition-colors email-item" data-priority="urgent" data-score="0.87">
                        <div class="p-4 border-b border-green-200">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center space-x-3">
                                    <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=40&h=40" alt="Mike Rodriguez profile" class="w-8 h-8 rounded-full">
                                    <div>
                                        <p class="text-sm font-semibold text-gray-900" data-bind="email.sender">Mike Rodriguez</p>
                                        <p class="text-xs text-gray-600">Client <i class="fas fa-briefcase text-gray-500 ml-1"></i></p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <span class="bg-google-red text-white text-xs px-2 py-1 rounded-full font-medium">Urgent</span>
                                        <span class="text-xs text-gray-500" data-bind="email.timestamp">4 hours ago</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <span class="text-xs text-gray-600">Confidence:</span>
                                        <span class="text-xs font-medium text-green-600" data-bind="email.score">87%</span>
                                    </div>
                                </div>
                            </div>
                            <h3 class="text-sm font-semibold text-gray-900 mb-1" data-bind="email.subject">Project Timeline Concerns</h3>
                            <p class="text-xs text-gray-600 mb-2" data-bind="email.summary">AI Summary: Client expressing concerns about delivery delays. Meeting requested for tomorrow. Escalation risk detected.</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4 text-xs text-gray-600">
                                    <span><i class="fas fa-clock mr-1"></i>Deadline: Not Found</span>
                                    <span><i class="fas fa-comments mr-1"></i>Thread (2 messages)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="text-xs bg-white border border-gray-300 px-2 py-1 rounded hover:bg-gray-50" data-event="click:correctPrediction">
                                        <i class="fas fa-edit mr-1"></i>Correct AI
                                    </button>
                                    <button class="text-xs bg-google-blue text-white px-2 py-1 rounded hover:bg-blue-600">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Third Priority Email - Lighter Green Background -->
                    <div class="border-l-4 border-orange-400 bg-orange-50 hover:bg-orange-100 cursor-pointer transition-colors email-item" data-priority="urgent" data-score="0.76">
                        <div class="p-4 border-b border-orange-200">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center space-x-3">
                                    <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=40&h=40" alt="Jennifer Park profile" class="w-8 h-8 rounded-full">
                                    <div>
                                        <p class="text-sm font-semibold text-gray-900" data-bind="email.sender">Jennifer Park</p>
                                        <p class="text-xs text-gray-600">Team <i class="fas fa-users text-blue-500 ml-1"></i></p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <span class="bg-google-red text-white text-xs px-2 py-1 rounded-full font-medium">Urgent</span>
                                        <span class="text-xs text-gray-500" data-bind="email.timestamp">30 minutes ago</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <span class="text-xs text-gray-600">Confidence:</span>
                                        <span class="text-xs font-medium text-green-600" data-bind="email.score">76%</span>
                                    </div>
                                </div>
                            </div>
                            <h3 class="text-sm font-semibold text-gray-900 mb-1" data-bind="email.subject">Security Breach Alert - Immediate Action Required</h3>
                            <p class="text-xs text-gray-600 mb-2" data-bind="email.summary">AI Summary: Potential security incident detected. IT team needs approval for emergency protocols. Time-sensitive decision required.</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4 text-xs text-gray-600">
                                    <span><i class="fas fa-clock mr-1"></i>Deadline: Not Found</span>
                                    <span><i class="fas fa-exclamation-triangle text-red-500 mr-1"></i>New message</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="text-xs bg-white border border-gray-300 px-2 py-1 rounded hover:bg-gray-50" data-event="click:correctPrediction">
                                        <i class="fas fa-edit mr-1"></i>Correct AI
                                    </button>
                                    <button class="text-xs bg-google-blue text-white px-2 py-1 rounded hover:bg-blue-600">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- @END_MAP )) -->
                </div>
            </div>
            <!-- @END_COMPONENT: Email List -->

            <!-- @COMPONENT: Email Detail Panel -->
            <div class="flex-1 bg-white flex flex-col">
                <!-- Email Detail Header -->
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <img src="https://pixabay.com/get/g1e7e3005c0551a09c1e2afb09d3e0f734b02f1540faa5f8ac070e2214c15b83950f67db0b2fe1b9361826453514ba6b8f6624cbb5bd3ae4aeb5f3d7574c7bc43_1280.jpg" alt="Sarah Chen profile" class="w-12 h-12 rounded-full">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-900" data-bind="selectedEmail.subject">Q4 Budget Review - Need Response Today</h2>
                                <p class="text-sm text-gray-600" data-bind="selectedEmail.sender">Sarah Chen <span class="text-gray-400">sarah.chen@company.com</span> â€¢ 2 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-star"></i>
                            </button>
                            <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-archive"></i>
                            </button>
                            <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- AI Thread Summary -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-robot text-google-blue"></i>
                            <span class="text-sm font-semibold text-gray-900">AI Thread Summary</span>
                        </div>
                        <p class="text-sm text-gray-700" data-bind="selectedEmail.aiSummary">Key context: Q4 budget approval needed ($50K). This is part of our annual budget review process, already approved by finance team.</p>
                        <div class="mt-3 space-y-2">
                            <div class="flex items-center text-xs text-gray-600">
                                <span class="font-medium">Deadline:</span>
                                <span class="ml-2" data-bind="selectedEmail.deadline">Today 5:00 PM</span>
                            </div>
                            <div class="flex items-center text-xs text-gray-600">
                                <span class="font-medium">Action Required:</span>
                                <span class="ml-2">Your sign-off on budget allocation</span>
                            </div>
                            <div class="flex items-center text-xs text-gray-600">
                                <span class="font-medium">Context:</span>
                                <span class="ml-2">Part of annual budget review process, already approved by finance team</span>
                            </div>
                        </div>
                        <button class="mt-3 text-xs text-google-blue hover:underline">View full thread analysis</button>
                    </div>
                </div>

                <!-- Email Content -->
                <div class="flex-1 overflow-y-auto p-6">
                    <div class="prose max-w-none">
                        <p class="text-gray-700" data-bind="selectedEmail.content">Hi there,</p>
                        <br>
                        <p class="text-gray-700">I need your approval on the Q4 marketing budget allocation of $50,000. This is part of our annual budget review process and has already been approved by the finance team.</p>
                        <br>
                        <p class="text-gray-700"><strong>Deadline: Today 5:00 PM</strong></p>
                        <br>
                        <p class="text-gray-700">The allocation will cover:</p>
                        <ul class="text-gray-700">
                            <li>Digital advertising campaigns ($30K)</li>
                            <li>Content creation and design ($15K)</li>
                            <li>Event marketing ($5K)</li>
                        </ul>
                        <br>
                        <p class="text-gray-700">Please let me know if you need any additional details.</p>
                        <br>
                        <p class="text-gray-700">Best,<br>Sarah</p>
                    </div>
                </div>

                <!-- AI Draft Response -->
                <div class="border-t border-gray-200 p-6">
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-pen-fancy text-google-green"></i>
                                <span class="text-sm font-semibold text-gray-900">AI Draft Response</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs text-gray-600">Confidence: 92%</span>
                                <span class="text-xs text-green-600 bg-green-100 px-2 py-1 rounded">Professional</span>
                            </div>
                        </div>
                        <div class="bg-white rounded border p-3 text-sm text-gray-700">
                            <p>Hi Sarah,</p>
                            <br>
                            <p>Thanks for the detailed breakdown. I approve the Q4 marketing budget allocation of $50,000 as outlined.</p>
                            <br>
                            <p>The distribution across digital advertising, content creation, and events looks well-balanced and aligns with our strategic priorities.</p>
                            <br>
                            <p>Please proceed with the implementation and keep me updated on progress.</p>
                            <br>
                            <p>Best regards</p>
                        </div>
                        <div class="mt-3 flex items-center space-x-2">
                            <button class="bg-google-blue text-white px-4 py-2 text-sm rounded hover:bg-blue-600">
                                <i class="fas fa-paper-plane mr-2"></i>Send Response
                            </button>
                            <button class="bg-white border border-gray-300 text-gray-700 px-4 py-2 text-sm rounded hover:bg-gray-50">
                                <i class="fas fa-edit mr-2"></i>Edit Draft
                            </button>
                            <button class="text-gray-600 hover:text-gray-800 px-4 py-2 text-sm">
                                <i class="fas fa-sync-alt mr-2"></i>Regenerate
                            </button>
                        </div>
                    </div>

                    <!-- Follow-up Reminders -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-bell text-yellow-600"></i>
                            <span class="text-sm font-semibold text-gray-900">Follow-up Reminders</span>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between bg-white rounded p-2 text-sm">
                                <span class="text-gray-700">Client proposal - 2 days overdue</span>
                                <button class="text-xs text-google-blue hover:underline">View</button>
                            </div>
                            <div class="flex items-center justify-between bg-white rounded p-2 text-sm">
                                <span class="text-gray-700">Team standup - Due in 2 hours</span>
                                <button class="text-xs text-google-blue hover:underline">View</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: Email Detail Panel -->
        </div>
    </div>

    <!-- @COMPONENT: Priority Correction Modal -->
    <div id="correctionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-96 max-w-md mx-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">Correct AI Classification</h3>
                <button class="text-gray-400 hover:text-gray-600" data-event="click:closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="mb-4">
                <p class="text-sm text-gray-600 mb-3">AI classified this email as <strong class="text-google-red">Urgent</strong> with 95% confidence. Is this correct?</p>
                
                <div class="space-y-2">
                    <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                        <input type="radio" name="priority" value="urgent" class="text-google-blue" checked>
                        <div class="flex items-center space-x-2">
                            <span class="bg-google-red text-white text-xs px-2 py-1 rounded-full">Urgent</span>
                            <span class="text-sm text-gray-700">Requires immediate attention</span>
                        </div>
                    </label>
                    
                    <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                        <input type="radio" name="priority" value="normal" class="text-google-blue">
                        <div class="flex items-center space-x-2">
                            <span class="bg-google-green text-white text-xs px-2 py-1 rounded-full">Normal</span>
                            <span class="text-sm text-gray-700">Standard priority</span>
                        </div>
                    </label>
                    
                    <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                        <input type="radio" name="priority" value="low" class="text-google-blue">
                        <div class="flex items-center space-x-2">
                            <span class="bg-gray-500 text-white text-xs px-2 py-1 rounded-full">Low</span>
                            <span class="text-sm text-gray-700">Can wait</span>
                        </div>
                    </label>
                </div>
            </div>
            
            <div class="flex justify-end space-x-3">
                <button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800" data-event="click:closeModal">Cancel</button>
                <button class="px-4 py-2 text-sm bg-google-blue text-white rounded hover:bg-blue-600" data-event="click:updateClassification">
                    <i class="fas fa-check mr-2"></i>Update & Retrain AI
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: Priority Correction Modal -->

    <!-- @COMPONENT: Calendar Events Sidebar -->
    <div id="calendarSidebar" class="hidden fixed right-0 top-0 h-full w-80 bg-white border-l border-gray-200 shadow-lg z-40">
        <div class="p-4 border-b border-gray-200">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">Created Events</h3>
                <button class="text-gray-400 hover:text-gray-600" data-event="click:closeCalendar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <p class="text-sm text-gray-600">Events automatically created from email deadlines</p>
        </div>
        
        <div class="flex-1 overflow-y-auto p-4">
            <div class="space-y-3">
                <!-- Event from email deadline -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <div class="flex items-start justify-between mb-2">
                        <h4 class="text-sm font-semibold text-gray-900">Q4 Budget Review - Need Response Today</h4>
                        <button class="text-red-500 hover:text-red-700 text-xs" data-event="click:deleteEvent">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <p class="text-xs text-gray-600 mb-2">Created from email deadline</p>
                    <div class="flex items-center space-x-4 text-xs text-gray-600">
                        <span><i class="fas fa-calendar mr-1"></i>Today</span>
                        <span><i class="fas fa-clock mr-1"></i>5:00 PM</span>
                    </div>
                    <button class="mt-2 text-xs text-google-blue hover:underline">Edit in Google Calendar</button>
                </div>
                
                <!-- Additional events would be mapped here -->
                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                    <div class="flex items-start justify-between mb-2">
                        <h4 class="text-sm font-semibold text-gray-900">Project Timeline Meeting</h4>
                        <button class="text-red-500 hover:text-red-700 text-xs" data-event="click:deleteEvent">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <p class="text-xs text-gray-600 mb-2">Created from email request</p>
                    <div class="flex items-center space-x-4 text-xs text-gray-600">
                        <span><i class="fas fa-calendar mr-1"></i>Tomorrow</span>
                        <span><i class="fas fa-clock mr-1"></i>2:00 PM</span>
                    </div>
                    <button class="mt-2 text-xs text-google-blue hover:underline">Edit in Google Calendar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: Calendar Events Sidebar -->

    <script>
        // TODO: Implement Gmail API integration, email classification, and calendar management
        // TODO: Add real-time email syncing and AI processing
        // TODO: Implement adaptive classifier feedback loop
        
        (function() {
            // Credentials upload handling
            const credentialsUpload = document.getElementById('credentialsUpload');
            const credentialsFile = document.getElementById('credentialsFile');
            const credentialsStatus = document.getElementById('credentialsStatus');
            
            credentialsUpload.addEventListener('click', function() {
                credentialsFile.click();
            });
            
            credentialsFile.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    if (file.name.endsWith('.json')) {
                        credentialsStatus.classList.remove('hidden');
                        credentialsUpload.classList.add('hidden');
                        // TODO: Process credentials.json and initialize Gmail/Calendar APIs
                    }
                }
            });
            
            // Email selection handling
            const emailItems = document.querySelectorAll('.email-item');
            emailItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove previous selections
                    emailItems.forEach(el => el.classList.remove('ring-2', 'ring-google-blue'));
                    // Add selection to clicked item
                    this.classList.add('ring-2', 'ring-google-blue');
                    // TODO: Load email details in right panel
                });
            });
            
            // Priority correction modal
            const correctionModal = document.getElementById('correctionModal');
            const correctionButtons = document.querySelectorAll('[data-event="click:correctPrediction"]');
            
            correctionButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    correctionModal.classList.remove('hidden');
                });
            });
            
            // Close modal handlers
            document.querySelectorAll('[data-event="click:closeModal"]').forEach(button => {
                button.addEventListener('click', function() {
                    correctionModal.classList.add('hidden');
                });
            });
            
            // Update classification handler
            document.querySelector('[data-event="click:updateClassification"]').addEventListener('click', function() {
                const selectedPriority = document.querySelector('input[name="priority"]:checked').value;
                // TODO: Send correction to adaptive classifier for retraining
                // classifier.add_examples([email_text], [selectedPriority])
                correctionModal.classList.add('hidden');
                
                // Show success feedback
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                notification.textContent = 'AI model updated with your feedback';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            });
            
            // Calendar sidebar
            const calendarSidebar = document.getElementById('calendarSidebar');
            document.querySelector('[href="#calendar"]')?.addEventListener('click', function(e) {
                e.preventDefault();
                calendarSidebar.classList.remove('hidden');
            });
            
            document.querySelector('[data-event="click:closeCalendar"]')?.addEventListener('click', function() {
                calendarSidebar.classList.add('hidden');
            });
            
            // Delete event handlers
            document.querySelectorAll('[data-event="click:deleteEvent"]').forEach(button => {
                button.addEventListener('click', function() {
                    if (confirm('Are you sure you want to delete this calendar event?')) {
                        this.closest('.bg-blue-50, .bg-green-50').remove();
                        // TODO: Delete from Google Calendar via API
                    }
                });
            });
            
            // Simulated loading state
            function showLoadingState() {
                const loadingOverlay = document.createElement('div');
                loadingOverlay.className = 'fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50';
                loadingOverlay.innerHTML = `
                    <div class="text-center">
                        <i class="fas fa-spinner fa-spin text-3xl text-google-blue mb-4"></i>
                        <p class="text-gray-600">Processing emails with AI...</p>
                    </div>
                `;
                document.body.appendChild(loadingOverlay);
                
                setTimeout(() => {
                    loadingOverlay.remove();
                }, 2000);
            }
            
            // Sync emails button
            document.querySelector('[data-event="click:handleSubmit"], button:contains("Sync Emails")')?.addEventListener('click', function() {
                showLoadingState();
                // TODO: Trigger email sync and AI processing workflow
            });
        })();
    </script>
</body>
</html>